(function() {
  // Progress Bar Animation (for skill bars)
  $(".skills-prog li")
    .find(".skills-bar")
    .each(function(i) {
      $(this)
        .find(".bar")
        .delay(i * 150)  // Delay for each skill bar animation
        .animate(
          {
            width: $(this).parents().attr("data-percent") + "%"  // Set width based on the data-percent attribute
          },
          1000,  // Duration of the animation
          "linear",  // Animation easing
          function() {
            $(this).css({
              "transition-duration": ".5s"  // Smooth transition at the end
            });
          }
        );
    });

  // Circular Skill Graph Animation (for SVG circles)
  $(".skills-soft li")
    .find("svg")
    .each(function(i) {
      var c, cbar, circle, percent, r;
      circle = $(this).children(".cbar");  // Get the circle element
      r = circle.attr("r");  // Get the radius of the circle
      c = Math.PI * (r * 2);  // Circumference calculation
      percent = $(this).parent().data("percent");  // Get the percent value
      cbar = (100 - percent) / 100 * c;  // Calculate the stroke-dashoffset based on the percentage

      // Set the initial stroke-dashoffset to full circle
      circle.css({
        "stroke-dashoffset": c,
        "stroke-dasharray": c
      });

      // Animate the circle progress
      circle.delay(i * 150)  // Delay for each skill animation
        .animate(
          {
            strokeDashoffset: cbar  // Animate to the new stroke-dashoffset
          },
          1000,  // Duration of the animation
          "linear",  // Animation easing
          function() {
            circle.css({
              "transition-duration": ".3s"  // Smooth transition at the end
            });
          }
        );

      // Animate the percentage text next to the circle
      $(this).siblings("small")
        .prop("Counter", 0)
        .delay(i * 150)
        .animate(
          {
            Counter: percent  // Animate the percentage value
          },
          {
            duration: 1000,
            step: function(now) {
              $(this).text(Math.ceil(now) + "%");  // Update the text to show the percentage
            }
          }
        );
    });
}).call(this);
